(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a075380"],{"0cc9":function(t,e,i){},1276:function(t,e,i){"use strict";var s=i("d784"),a=i("44e7"),n=i("825a"),r=i("1d80"),o=i("4840"),l=i("8aa5"),c=i("50c4"),u=i("14c3"),d=i("9263"),p=i("d039"),h=[].push,y=Math.min,f=4294967295,v=!p((function(){return!RegExp(f,"y")}));s("split",2,(function(t,e,i){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var s=String(r(this)),n=void 0===i?f:i>>>0;if(0===n)return[];if(void 0===t)return[s];if(!a(t))return e.call(s,t,n);var o,l,c,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,v=new RegExp(t.source,p+"g");while(o=d.call(v,s)){if(l=v.lastIndex,l>y&&(u.push(s.slice(y,o.index)),o.length>1&&o.index<s.length&&h.apply(u,o.slice(1)),c=o[0].length,y=l,u.length>=n))break;v.lastIndex===o.index&&v.lastIndex++}return y===s.length?!c&&v.test("")||u.push(""):u.push(s.slice(y)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var a=r(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a,i):s.call(String(a),e,i)},function(t,a){var r=i(s,t,this,a,s!==e);if(r.done)return r.value;var d=n(t),p=String(this),h=o(d,RegExp),g=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),m=new h(v?d:"^(?:"+d.source+")",b),S=void 0===a?f:a>>>0;if(0===S)return[];if(0===p.length)return null===u(m,p)?[p]:[];var w=0,k=0,x=[];while(k<p.length){m.lastIndex=v?k:0;var C,_=u(m,v?p:p.slice(k));if(null===_||(C=y(c(m.lastIndex+(v?0:k)),p.length))===w)k=l(p,k,g);else{if(x.push(p.slice(w,k)),x.length===S)return x;for(var T=1;T<=_.length-1;T++)if(x.push(_[T]),x.length===S)return x;k=w=C}}return x.push(p.slice(w)),x}]}),!v)},2726:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cover-row"},t._l(t.items,(function(e){return i("div",{key:e.id,staticClass:"item",class:{artist:"artist"===t.type},style:{marginBottom:"none"===t.subText?"32px":"24px"}},[i("Cover",{staticClass:"cover",attrs:{id:e.id,type:"chart"===t.type?"playlist":t.type,url:t._f("resizeImage")(t.getUrl(e),t.imageSize),hoverEffect:!0,showBlackShadow:!0,showPlayButton:t.showPlayButton,radius:"artist"===t.type?100:12,size:"artist"===t.type?192:208}}),i("div",{staticClass:"text"},[t.showPlayCount?i("div",{staticClass:"info"},[i("span",{staticClass:"play-count"},[i("svg-icon",{attrs:{"icon-class":"play"}}),t._v(t._s(t._f("formatPlayCount")(e.playCount))+" ")],1)]):t._e(),i("div",{staticClass:"name"},["album"===t.type&&1056768===e.mark?i("span",{staticClass:"explicit-symbol"},[i("ExplicitSymbol")],1):t._e(),"playlist"===t.type&&10===e.privacy?i("span",{staticClass:"lock-icon"},[i("svg-icon",{attrs:{"icon-class":"lock"}})],1):t._e(),i("router-link",{attrs:{to:"/"+("chart"===t.type?"playlist":t.type)+"/"+e.id}},[t._v(t._s(e.name))])],1),"artist"!==t.type&&"none"!==t.subText?i("div",{staticClass:"info"},[i("span",{domProps:{innerHTML:t._s(t.getSubText(e))}})]):t._e()])],1)})),0)},a=[],n=(i("a4d3"),i("e01a"),i("99af"),i("b0c0"),i("a9e3"),i("0c94")),r=i("3020"),o={name:"CoverRow",components:{Cover:r["a"],ExplicitSymbol:n["a"]},props:{items:Array,type:String,subText:{type:String,default:"none"},imageSize:{type:Number,default:512},showPlayButton:{type:Boolean,default:!1},showPlayCount:{type:Boolean,default:!1}},methods:{getUrl:function(t){return void 0!==t.picUrl?t.picUrl:void 0!==t.coverImgUrl?t.coverImgUrl:void 0!==t.img1v1Url?t.img1v1Url:void 0},getSubText:function(t){if("copywriter"===this.subText)return t.copywriter;if("description"===this.subText)return t.description;if("updateFrequency"===this.subText)return t.updateFrequency;if("creator"===this.subText)return"by "+t.creator.nickname;if("releaseYear"===this.subText)return new Date(t.publishTime).getFullYear();if("artist"===this.subText)return'<a href="/#/artist/'.concat(t.artist.id,'">').concat(t.artist.name,"</a>");if("albumType+releaseYear"===this.subText){var e=t.type;return"EP/Single"===t.type?e=1===t.size?"Single":"EP":"Single"===t.type?e="Single":"专辑"===t.type&&(e="Album"),"".concat(e," · ").concat(new Date(t.publishTime).getFullYear())}return"appleMusic"===this.subText?"by Apple Music":void 0}}},l=o,c=(i("7a0e"),i("2877")),u=Object(c["a"])(l,s,a,!1,null,"28446e48",null);e["a"]=u.exports},2909:function(t,e,i){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function a(t){if(Array.isArray(t))return s(t)}i.d(e,"a",(function(){return l}));i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0");function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}i("fb6a"),i("b0c0"),i("25f0");function r(t,e){if(t){if("string"===typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return a(t)||n(t)||r(t)||o()}},3020:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{position:"relative"}},[i("transition",{attrs:{name:"zoom"}},[i("div",{staticClass:"cover",class:{"hover-float":t.hoverEffect,"hover-play-button":t.showPlayButton},style:t.coverStyle,on:{mouseover:function(e){t.focus=!0},mouseleave:function(e){t.focus=!1},click:function(e){t.clickToPlay?t.play():t.goTo()}}},[t.showPlayButton?i("button",{staticClass:"play-button",style:t.playButtonStyle,on:{click:function(e){return e.stopPropagation(),t.playButtonClicked(e)}}},[i("svg-icon",{attrs:{"icon-class":"play"}})],1):t._e()])]),t.hoverEffect?i("transition",{attrs:{name:"fade"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.focus,expression:"focus"}],staticClass:"shadow",style:t.shadowStyle,attrs:{src:t.url}})]):t._e(),t.alwaysShowShadow?i("img",{staticClass:"shadow",style:t.shadowStyle,attrs:{src:t.url}}):t._e()],1)},a=[],n=(i("a9e3"),i("eb6f")),r={name:"Cover",props:{id:Number,type:String,url:String,hoverEffect:Boolean,showPlayButton:Boolean,alwaysShowShadow:Boolean,showBlackShadow:Boolean,clickToPlay:Boolean,size:{type:Number,default:208},shadowMargin:{type:Number,default:12},radius:{type:Number,default:12},playButtonSize:{type:Number,default:48}},data:function(){return{focus:!1,shadowStyle:{},playButtonStyle:{}}},created:function(){this.shadowStyle={height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),top:"".concat(this.shadowMargin,"px"),borderRadius:"".concat(this.radius,"px")},this.playButtonStyle={height:"".concat(this.playButtonSize,"px"),width:"".concat(this.playButtonSize,"px")}},computed:{coverStyle:function(){return{backgroundImage:"url('".concat(this.url,"')"),boxShadow:this.showBlackShadow?"0 12px 16px -8px rgba(0, 0, 0, 0.2)":"",height:"".concat(this.size,"px"),width:"".concat(this.size,"px"),borderRadius:"".concat(this.radius,"px"),cursor:this.clickToPlay?"default":"pointer"}}},methods:{play:function(){"album"===this.type?Object(n["c"])(this.id):"playlist"===this.type&&Object(n["e"])(this.id)},playButtonClicked:function(){"album"===this.type?Object(n["c"])(this.id):"playlist"===this.type?Object(n["e"])(this.id):"artist"===this.type&&Object(n["d"])(this.id)},goTo:function(){this.$router.push({name:this.type,params:{id:this.id}})}}},o=r,l=(i("b487"),i("2877")),c=Object(l["a"])(o,s,a,!1,null,"b66fa8a4",null);e["a"]=c.exports},"4df4":function(t,e,i){"use strict";var s=i("0366"),a=i("7b0b"),n=i("9bdd"),r=i("e95a"),o=i("50c4"),l=i("8418"),c=i("35a1");t.exports=function(t){var e,i,u,d,p,h,y=a(t),f="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,b=void 0!==g,m=c(y),S=0;if(b&&(g=s(g,v>2?arguments[2]:void 0,2)),void 0==m||f==Array&&r(m))for(e=o(y.length),i=new f(e);e>S;S++)h=b?g(y[S],S):y[S],l(i,S,h);else for(d=m.call(y),p=d.next,i=new f;!(u=p.call(d)).done;S++)h=b?n(d,g,[u.value,S],!0):u.value,l(i,S,h);return i.length=S,i}},"7a0e":function(t,e,i){"use strict";var s=i("0cc9"),a=i.n(s);a.a},a294:function(t,e,i){"use strict";var s=i("a930"),a=i.n(s);a.a},a630:function(t,e,i){var s=i("23e7"),a=i("4df4"),n=i("1c7e"),r=!n((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:r},{from:a})},a930:function(t,e,i){},b487:function(t,e,i){"use strict";var s=i("cc89"),a=i.n(s);a.a},cc89:function(t,e,i){},d28b:function(t,e,i){var s=i("746f");s("iterator")},e01a:function(t,e,i){"use strict";var s=i("23e7"),a=i("83ab"),n=i("da84"),r=i("5135"),o=i("861d"),l=i("9bf2").f,c=i("e893"),u=n.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};c(p,u);var h=p.prototype=u.prototype;h.constructor=p;var y=h.toString,f="Symbol(test)"==String(u("test")),v=/^Symbol\((.*)\)[^)]+$/;l(h,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=y.call(t);if(r(d,t))return"";var i=f?e.slice(7,-1):e.replace(v,"$1");return""===i?void 0:i}}),s({global:!0,forced:!0},{Symbol:p})}},e36c:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[i("h1",[i("img",{staticClass:"head",attrs:{src:t._f("resizeImage")(t.user.profile.avatarUrl)}}),t._v(t._s(t.user.profile.nickname)+t._s(t.$t("library.sLibrary"))+" ")]),i("div",{staticClass:"section-one"},[i("div",{staticClass:"liked-songs",on:{click:t.goToLikedSongsList}},[i("div",{staticClass:"top"},[i("p",t._l(t.pickedLyric,(function(e,s){return i("span",{directives:[{name:"show",rawName:"v-show",value:""!==e,expression:"line !== ''"}],key:""+e+s},[t._v(t._s(e)),i("br")])})),0)]),i("div",{staticClass:"bottom"},[i("div",{staticClass:"titles"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("library.likedSongs")))]),i("div",{staticClass:"sub-title"},[t._v(" "+t._s(t.likedSongsPlaylist.trackCount)+" "+t._s(t.$t("common.songs"))+" ")])]),i("button",{on:{click:function(e){return e.stopPropagation(),t.playLikedSongs(e)}}},[i("svg-icon",{attrs:{"icon-class":"play"}})],1)])]),i("div",{staticClass:"songs"},[i("TrackList",{attrs:{tracks:t.likedSongs,type:"tracklist",itemWidth:220,id:t.likedSongsPlaylist.id,dbclickTrackFunc:"playPlaylistByID"}})],1)]),t.playlists.length>1?i("div",{staticClass:"playlists"},[i("div",{staticClass:"title"},[t._v(t._s(t.$t("playlist.playlist")))]),i("div",[i("CoverRow",{attrs:{items:t.playlists.slice(1),type:"playlist",subText:"creator",showPlayButton:!0}})],1)]):t._e()])},a=[],n=(i("4de4"),i("caad"),i("a15b"),i("d81d"),i("fb6a"),i("ac1f"),i("2532"),i("1276"),i("2909")),r=i("5530"),o=i("2f62"),l=i("fefb"),c=i("c24f"),u=i("cf45"),d=i("1e9a"),p=i("eb6f"),h=i("323e"),y=i.n(h),f=i("a1a1"),v=i("2726"),g=i("0032"),b={name:"Library",components:{SvgIcon:g["a"],CoverRow:v["a"],TrackList:f["a"]},data:function(){return{show:!1,user:{profile:{avatarUrl:"",nickname:""}},playlists:[],hasMorePlaylists:!0,likedSongsPlaylist:{id:0,trackCount:0},likedSongs:[],likedSongIDs:[],lyric:void 0}},created:function(){var t=this;y.a.start(),Object(c["a"])(this.settings.user.userId).then((function(e){t.user=e}))},activated:function(){this.loadData()},computed:Object(r["a"])(Object(r["a"])({},Object(o["d"])(["settings"])),{},{likedSongsInState:function(){return this.$store.state.liked.songs},pickedLyric:function(){if(void 0===this.lyric)return"";var t=this.lyric.split("\n");t=t.filter((function(t){return!t.includes("作词")&&!t.includes("作曲")}));var e=Object(u["b"])(0,t.length-1);while(e+4>t.length)e=Object(u["b"])(0,t.length-1);return[t[e].split("]")[1],t[e+1].split("]")[1],t[e+2].split("]")[1]]}}),methods:{playLikedSongs:function(){Object(p["e"])(this.playlists[0].id,"first",!0)},goToLikedSongsList:function(){this.$router.push({path:"/library/liked-songs"})},loadData:function(){this.hasMorePlaylists&&this.getUserPlaylists(),this.getLikedSongs()},getUserPlaylists:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(c["c"])({uid:this.settings.user.userId,offset:0===this.playlists.length?0:this.playlists.length-1,timestamp:(new Date).getTime()}).then((function(i){var s;e?t.playlists=i.playlist:(s=t.playlists).push.apply(s,Object(n["a"])(i.playlist));t.hasMorePlaylists=i.more}))},getLikedSongs:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(d["a"])(this.settings.user.likedSongPlaylistID,!0).then((function(i){t.likedSongsPlaylist=i.playlist;var s=i.playlist.trackIds.slice(0,20).map((function(t){return t.id}));t.likedSongIDs=s,Object(l["c"])(t.likedSongIDs.join(",")).then((function(e){t.likedSongs=e.songs,y.a.done(),t.show=!0})),e&&t.getRandomLyric()}))},getRandomLyric:function(){var t=this;Object(l["a"])(this.likedSongIDs[Object(u["b"])(0,this.likedSongIDs.length-1)]).then((function(e){void 0!==e.lrc&&(t.lyric=e.lrc.lyric)}))}},watch:{likedSongsInState:function(){this.getLikedSongs(!1)}}},m=b,S=(i("a294"),i("2877")),w=Object(S["a"])(m,s,a,!1,null,"351a632d",null);e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-4a075380.218dd486.js.map